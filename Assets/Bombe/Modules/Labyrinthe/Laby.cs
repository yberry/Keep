using UnityEngine;

public class Laby
{
    public enum Dir
    {
        Haut = 8,
        Gauche = 4,
        Bas = 2,
        Droite = 1
    }

    private static readonly Laby[] labys = new Laby[]
    {
        new Laby(new int[,] {
            { 0x1100, 0x1010, 0x1001, 0x1100, 0x1010, 0x1011 },
            { 0x0101, 0x1100, 0x0011, 0x0110, 0x1010, 0x1001 },
            { 0x0101, 0x0110, 0x1001, 0x1100, 0x1010, 0x0001 },
            { 0x0101, 0x1110, 0x0010, 0x0011, 0x1110, 0x0001 },
            { 0x0100, 0x1010, 0x1001, 0x1100, 0x1011, 0x0101 },
            { 0x0110, 0x1011, 0x0110, 0x0011, 0x1110, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1110, 0x1000, 0x1011, 0x1100, 0x1000, 0x1011 },
            { 0x1100, 0x0011, 0x1100, 0x0011, 0x0110, 0x1001 },
            { 0x0101, 0x1100, 0x0011, 0x1100, 0x1010, 0x0001 },
            { 0x0100, 0x0011, 0x1100, 0x0011, 0x1101, 0x0101 },
            { 0x0101, 0x1101, 0x0101, 0x1100, 0x0011, 0x0101 },
            { 0x0111, 0x0110, 0x0011, 0x0110, 0x1010, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1100, 0x1010, 0x1001, 0x1101, 0x1100, 0x1001 },
            { 0x0111, 0x1101, 0x0101, 0x0110, 0x0011, 0x0101 },
            { 0x1100, 0x0001, 0x0101, 0x1100, 0x1001, 0x0101 },
            { 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101 },
            { 0x0101, 0x0110, 0x0011, 0x0101, 0x0101, 0x0101 },
            { 0x0110, 0x1010, 0x1010, 0x0011, 0x0110, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1100, 0x1001, 0x1110, 0x1010, 0x1010, 0x1001 },
            { 0x0101, 0x0101, 0x1100, 0x1010, 0x1010, 0x0001 },
            { 0x0101, 0x0110, 0x0011, 0x1100, 0x1011, 0x0101 },
            { 0x0101, 0x1110, 0x1010, 0x0010, 0x1010, 0x0001 },
            { 0x0100, 0x1010, 0x1010, 0x1010, 0x1001, 0x0101 },
            { 0x0110, 0x1010, 0x1011, 0x1110, 0x0011, 0x0111 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1110, 0x1010, 0x1010, 0x1010, 0x1000, 0x1001 },
            { 0x1100, 0x1010, 0x1010, 0x1000, 0x0011, 0x0111 },
            { 0x0100, 0x1001, 0x1110, 0x0011, 0x1100, 0x1001 },
            { 0x0101, 0x0110, 0x1010, 0x1001, 0x0111, 0x0101 },
            { 0x0101, 0x1100, 0x1010, 0x0010, 0x1011, 0x0101 },
            { 0x0111, 0x0110, 0x1010, 0x1010, 0x1010, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1101, 0x1100, 0x1001, 0x1110, 0x1000, 0x1001 },
            { 0x0101, 0x0101, 0x0101, 0x1100, 0x0011, 0x0101 },
            { 0x0100, 0x0011, 0x0111, 0x0101, 0x1100, 0x0011 },
            { 0x0110, 0x1001, 0x1100, 0x0001, 0x0101, 0x1101 },
            { 0x1100, 0x0011, 0x0111, 0x0101, 0x0110, 0x0001 },
            { 0x0110, 0x1010, 0x1010, 0x0011, 0x1110, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1100, 0x1010, 0x1010, 0x1001, 0x1100, 0x1001 },
            { 0x0101, 0x1100, 0x1011, 0x0110, 0x0011, 0x0101 },
            { 0x0110, 0x0011, 0x1100, 0x1011, 0x1100, 0x0011 },
            { 0x1100, 0x1001, 0x0100, 0x1010, 0x0011, 0x1101 },
            { 0x0101, 0x0111, 0x0110, 0x1010, 0x1001, 0x0101 },
            { 0x0110, 0x1010, 0x1010, 0x1010, 0x0010, 0x0011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1101, 0x1100, 0x1010, 0x1001, 0x1100, 0x1001 },
            { 0x0100, 0x0010, 0x1011, 0x0110, 0x0011, 0x0101 },
            { 0x0101, 0x1100, 0x1010, 0x1010, 0x1001, 0x0101 },
            { 0x0101, 0x0110, 0x1001, 0x1110, 0x0010, 0x0011 },
            { 0x0101, 0x1101, 0x0110, 0x1010, 0x1010, 0x1011 },
            { 0x0110, 0x0010, 0x1010, 0x1010, 0x1010, 0x1011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f)),

        new Laby(new int[,] {
            { 0x1101, 0x1100, 0x1010, 0x1010, 0x1000, 0x1001 },
            { 0x0101, 0x0101, 0x1100, 0x1011, 0x0101, 0x0101 },
            { 0x0100, 0x0010, 0x0011, 0x1100, 0x0011, 0x0101 },
            { 0x0101, 0x0101, 0x1100, 0x0011, 0x1110, 0x0001 },
            { 0x0101, 0x0101, 0x0101, 0x1100, 0x1001, 0x0111 },
            { 0x0110, 0x0011, 0x0110, 0x0011, 0x0110, 0x1011 }
        }, new Vector2(0f, 0f), new Vector2(0f, 0f))
    };

    public static Laby RandomLaby
    {
        get
        {
            return labys.RandomItem();
        }        
    }

    private int[,] places;
    private Vector2 rond1;
    private Vector2 rond2;

    public Laby(int[,] pl, Vector2 r1, Vector2 r2)
    {
        places = pl;
        rond1 = r1;
        rond2 = r2;
    }

    public bool HasMur(Vector2 pos, Dir dir)
    {
        int pl = places[(int)pos.x, (int)pos.y];

        return (pl & (int)dir) != 0;
    }
}